{"changed":true,"filter":false,"title":"controller.js","tooltip":"/public/js/controller.js","value":"var controllers = angular.module('appControllers',[]);\n\ncontrollers.\n    controller('FeedController', ['$scope','$http', 'postDataService', function($scope,$http,postDataService){\n        var path = '/posts/allpost';\n        /*{       \n                \"id\": \"asdasda1u9njkgsdasdas\",\n                \"author\": \"Lorem Author\",\n                \"title\": \"Lorem Title\",\n                \"imgLink\": \"images/img_29.jpg\",\n                \"likes\": 20,\n                \"tagNames\": [\"category1\",\"category2\"],\n                \"description\": \"Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum Lorem Ipsum\"\n        }*/\n        \n        var filterData = function(raw){\n            var returnObj = [];\n            if(raw.status) {            //check if data status was ok\n                var d = raw.status;     \n                d.forEach(function(val,i){      //loop through the objects\n                    returnObj[i] = \n                        { \n                            id: val._id,\n                            author: val.author.firstName,\n                            title: val.title,\n                            imgLink: val.imgUrl,\n                            description: val.content, \n                            tagNames: []\n                        };\n                    val.tag.forEach(function(val,i){\n                        returnObj[i].tagNames.push();\n                    });\n                });\n            } \n            return returnObj;\n        }\n        \n        $http.get(path).success(function(data){ //get data\n            $scope.loggedIn = $(\"#my-post\").attr('href') ? true : false; //check if user is logged in\n            $scope.content = data;  //get the data and return it to the scope\n            // console.log($scope.content);\n            filterData(data);\n            // postDataService.setData(data); //cache data to the global service \n        });\n    }]).\n    controller('SinglePostController', ['$scope','$http', '$routeParams', '$anchorScroll', '$location', 'postDataService', function($scope,$http,$routeParams,$anchorScroll,$location, postDataService){\n        var id = $routeParams.postId;\n        var data = postDataService.getData();\n        var path = 'fake-data/data.json';\n\n        $scope.content = data[id];                  //get data from cache\n\n        if($scope.content == undefined) {           //cache missed\n            $http.get(path).success(function(data){ //get data from source\n                $scope.content = data[id];          //set data to the scope\n            });\n        }\n        \n        // $location.hash('app-view');\n        // $anchorScroll();\n    }]).\n    controller('LoginController',['$scope','$http','$window', function($scope,$http,$window) {\n        \n        $scope.email = \"\";\n        $scope.password = \"\";\n        $scope.validateLogin = function(data) {\n            url='/login';\n            console.log(\"validating data\",\"data is:\",data);\n            $http({\n                method: 'POST',\n                url: url,\n                headers: {'Content-Type': 'application/json; charset=utf-8'},\n               \n                data: {email: data.email, password: data.password, rememberMe: data.rememberMe}\n            }).success(function (res) {\n                if(res.error) {\n                    $scope.errorMessage = \"Your credential was incorrect. Please try again.\";\n                    $scope.error = true;\n                } else {\n                   $window.location.href = res.success;\n                }\n                \n            });\n        }\n    }]).\n    controller('LogoutController', ['$scope','$http','$window', function($scope,$http,$window) {\n        $scope.logout = function() {\n            url='/logout';\n            $http({\n                method: 'GET',\n                url: url,\n            }).success(function (res) {\n                $window.location.href = '/';\n            }).error(function(res){\n                $window.location.href = '/';\n            });\n        }\n    }]).\n    controller('RegisterController', ['$scope','$http','$window', function($scope,$http,$window) {\n        $scope.error = false;\n        $scope.register = function(user) {\n            console.log(user);\n            var url = '/users/create';\n             if(user.password != user.passwordConfirm) { //precheck\n                $scope.error = true;\n                $scope.errorMessage = \"Password do not match.\";\n            } else {     \n                $http({\n                method: 'POST',\n                url: url,\n                headers: {'Content-Type': 'application/json; charset=utf-8'},\n               \n                data: user\n                }).success(function (res) {\n                    if(res.error) {\n                        console.log(\"response:\",res);\n                        $scope.errorMessage = \"Failed to create user \" + res.error;\n                        $scope.error = true;\n                    } else {\n                       $window.location.href = res.success;\n                    }\n                    \n                });\n            }\n        }\n    }]).\n    controller('CreatePostController', ['$scope','$http','$window', function($scope,$http,$window) {\n        $scope.error = false;\n        $scope.createPost = function(post) {\n            post.tag = $(\"#post-tags\").materialtags(\"items\");\n            var url = '/posts/create'; \n            console.log(post.tags);\n            $http({\n                method: 'POST',\n                url: url,\n                headers: {'Content-Type': 'application/json; charset=utf-8'},\n                data: post\n                }).success(function (res) {\n                    if(res.error) {\n                        console.log(\"response:\",res);\n                        $scope.errorMessage = \"Failed to create user \" + res.error;\n                        $scope.error = true;\n                    } else {\n                      $window.location.href = res.success;\n                    }\n                    \n                });\n        }\n    }]);","undoManager":{"mark":81,"position":100,"stack":[[{"start":{"row":26,"column":28},"end":{"row":26,"column":32},"action":"remove","lines":["desc"],"id":1301},{"start":{"row":26,"column":28},"end":{"row":26,"column":39},"action":"insert","lines":["description"]}],[{"start":{"row":26,"column":39},"end":{"row":26,"column":40},"action":"insert","lines":[":"],"id":1302}],[{"start":{"row":26,"column":40},"end":{"row":26,"column":41},"action":"insert","lines":[" "],"id":1303}],[{"start":{"row":26,"column":41},"end":{"row":26,"column":42},"action":"insert","lines":["v"],"id":1304}],[{"start":{"row":26,"column":42},"end":{"row":26,"column":43},"action":"insert","lines":["a"],"id":1305}],[{"start":{"row":26,"column":43},"end":{"row":26,"column":44},"action":"insert","lines":["l"],"id":1306}],[{"start":{"row":26,"column":44},"end":{"row":26,"column":45},"action":"insert","lines":["."],"id":1307}],[{"start":{"row":26,"column":45},"end":{"row":26,"column":46},"action":"insert","lines":["c"],"id":1308}],[{"start":{"row":26,"column":46},"end":{"row":26,"column":47},"action":"insert","lines":["e"],"id":1309}],[{"start":{"row":26,"column":47},"end":{"row":26,"column":48},"action":"insert","lines":["n"],"id":1310}],[{"start":{"row":26,"column":47},"end":{"row":26,"column":48},"action":"remove","lines":["n"],"id":1311}],[{"start":{"row":26,"column":46},"end":{"row":26,"column":47},"action":"remove","lines":["e"],"id":1312}],[{"start":{"row":26,"column":46},"end":{"row":26,"column":47},"action":"insert","lines":["o"],"id":1313}],[{"start":{"row":26,"column":47},"end":{"row":26,"column":48},"action":"insert","lines":["n"],"id":1314}],[{"start":{"row":26,"column":48},"end":{"row":26,"column":49},"action":"insert","lines":["t"],"id":1315}],[{"start":{"row":26,"column":49},"end":{"row":26,"column":50},"action":"insert","lines":["e"],"id":1316}],[{"start":{"row":26,"column":50},"end":{"row":26,"column":51},"action":"insert","lines":["n"],"id":1317}],[{"start":{"row":26,"column":51},"end":{"row":26,"column":52},"action":"insert","lines":["t"],"id":1318}],[{"start":{"row":27,"column":26},"end":{"row":28,"column":0},"action":"insert","lines":["",""],"id":1319},{"start":{"row":28,"column":0},"end":{"row":28,"column":24},"action":"insert","lines":["                        "]}],[{"start":{"row":28,"column":20},"end":{"row":28,"column":24},"action":"remove","lines":["    "],"id":1320}],[{"start":{"row":28,"column":20},"end":{"row":28,"column":21},"action":"insert","lines":["f"],"id":1321}],[{"start":{"row":28,"column":21},"end":{"row":28,"column":22},"action":"insert","lines":["i"],"id":1322}],[{"start":{"row":28,"column":21},"end":{"row":28,"column":22},"action":"remove","lines":["i"],"id":1323}],[{"start":{"row":28,"column":20},"end":{"row":28,"column":21},"action":"remove","lines":["f"],"id":1324}],[{"start":{"row":28,"column":20},"end":{"row":28,"column":21},"action":"insert","lines":["v"],"id":1325}],[{"start":{"row":28,"column":21},"end":{"row":28,"column":22},"action":"insert","lines":["a"],"id":1326}],[{"start":{"row":28,"column":22},"end":{"row":28,"column":23},"action":"insert","lines":["l"],"id":1327}],[{"start":{"row":28,"column":23},"end":{"row":28,"column":24},"action":"insert","lines":["."],"id":1328}],[{"start":{"row":28,"column":24},"end":{"row":28,"column":25},"action":"insert","lines":["t"],"id":1329}],[{"start":{"row":28,"column":25},"end":{"row":28,"column":26},"action":"insert","lines":["a"],"id":1330}],[{"start":{"row":28,"column":26},"end":{"row":28,"column":27},"action":"insert","lines":["g"],"id":1331}],[{"start":{"row":28,"column":27},"end":{"row":28,"column":28},"action":"insert","lines":["s"],"id":1332}],[{"start":{"row":28,"column":27},"end":{"row":28,"column":28},"action":"remove","lines":["s"],"id":1333}],[{"start":{"row":28,"column":27},"end":{"row":28,"column":28},"action":"insert","lines":[","],"id":1334}],[{"start":{"row":28,"column":27},"end":{"row":28,"column":28},"action":"remove","lines":[","],"id":1335}],[{"start":{"row":28,"column":27},"end":{"row":28,"column":28},"action":"insert","lines":["."],"id":1336}],[{"start":{"row":28,"column":28},"end":{"row":28,"column":29},"action":"insert","lines":["f"],"id":1337}],[{"start":{"row":28,"column":29},"end":{"row":28,"column":30},"action":"insert","lines":["o"],"id":1338}],[{"start":{"row":28,"column":30},"end":{"row":28,"column":31},"action":"insert","lines":["r"],"id":1339}],[{"start":{"row":28,"column":28},"end":{"row":28,"column":31},"action":"remove","lines":["for"],"id":1340},{"start":{"row":28,"column":28},"end":{"row":28,"column":37},"action":"insert","lines":["forEach()"]}],[{"start":{"row":28,"column":36},"end":{"row":28,"column":37},"action":"insert","lines":["f"],"id":1341}],[{"start":{"row":28,"column":37},"end":{"row":28,"column":38},"action":"insert","lines":["u"],"id":1342}],[{"start":{"row":28,"column":38},"end":{"row":28,"column":39},"action":"insert","lines":["n"],"id":1343}],[{"start":{"row":28,"column":39},"end":{"row":28,"column":40},"action":"insert","lines":["c"],"id":1344}],[{"start":{"row":28,"column":40},"end":{"row":28,"column":41},"action":"insert","lines":["t"],"id":1345}],[{"start":{"row":28,"column":41},"end":{"row":28,"column":42},"action":"insert","lines":["i"],"id":1346}],[{"start":{"row":28,"column":42},"end":{"row":28,"column":43},"action":"insert","lines":["o"],"id":1347}],[{"start":{"row":28,"column":43},"end":{"row":28,"column":44},"action":"insert","lines":["n"],"id":1348}],[{"start":{"row":28,"column":44},"end":{"row":28,"column":46},"action":"insert","lines":["()"],"id":1349}],[{"start":{"row":28,"column":45},"end":{"row":28,"column":46},"action":"insert","lines":["v"],"id":1350}],[{"start":{"row":28,"column":46},"end":{"row":28,"column":47},"action":"insert","lines":["a"],"id":1351}],[{"start":{"row":28,"column":47},"end":{"row":28,"column":48},"action":"insert","lines":["l"],"id":1352}],[{"start":{"row":28,"column":48},"end":{"row":28,"column":49},"action":"insert","lines":[","],"id":1353}],[{"start":{"row":28,"column":49},"end":{"row":28,"column":50},"action":"insert","lines":["i"],"id":1354}],[{"start":{"row":28,"column":51},"end":{"row":28,"column":53},"action":"insert","lines":["{}"],"id":1355}],[{"start":{"row":28,"column":52},"end":{"row":30,"column":20},"action":"insert","lines":["","                        ","                    "],"id":1356}],[{"start":{"row":30,"column":22},"end":{"row":30,"column":23},"action":"insert","lines":[";"],"id":1357}],[{"start":{"row":26,"column":53},"end":{"row":27,"column":0},"action":"insert","lines":["",""],"id":1358},{"start":{"row":27,"column":0},"end":{"row":27,"column":28},"action":"insert","lines":["                            "]}],[{"start":{"row":27,"column":28},"end":{"row":27,"column":29},"action":"insert","lines":["t"],"id":1359}],[{"start":{"row":27,"column":29},"end":{"row":27,"column":30},"action":"insert","lines":["a"],"id":1360}],[{"start":{"row":27,"column":30},"end":{"row":27,"column":31},"action":"insert","lines":["g"],"id":1361}],[{"start":{"row":27,"column":31},"end":{"row":27,"column":32},"action":"insert","lines":[" "],"id":1362}],[{"start":{"row":27,"column":31},"end":{"row":27,"column":32},"action":"remove","lines":[" "],"id":1363}],[{"start":{"row":27,"column":31},"end":{"row":27,"column":32},"action":"insert","lines":[" "],"id":1364}],[{"start":{"row":27,"column":31},"end":{"row":27,"column":32},"action":"remove","lines":[" "],"id":1365}],[{"start":{"row":27,"column":31},"end":{"row":27,"column":32},"action":"insert","lines":[":"],"id":1366}],[{"start":{"row":27,"column":32},"end":{"row":27,"column":33},"action":"insert","lines":[" "],"id":1367}],[{"start":{"row":27,"column":32},"end":{"row":27,"column":33},"action":"remove","lines":[" "],"id":1368}],[{"start":{"row":27,"column":31},"end":{"row":27,"column":32},"action":"remove","lines":[":"],"id":1369}],[{"start":{"row":27,"column":31},"end":{"row":27,"column":32},"action":"insert","lines":["N"],"id":1370}],[{"start":{"row":27,"column":32},"end":{"row":27,"column":33},"action":"insert","lines":["a"],"id":1371}],[{"start":{"row":27,"column":33},"end":{"row":27,"column":34},"action":"insert","lines":["m"],"id":1372}],[{"start":{"row":27,"column":34},"end":{"row":27,"column":35},"action":"insert","lines":["e"],"id":1373}],[{"start":{"row":27,"column":35},"end":{"row":27,"column":36},"action":"insert","lines":["s"],"id":1374}],[{"start":{"row":27,"column":36},"end":{"row":27,"column":37},"action":"insert","lines":[":"],"id":1375}],[{"start":{"row":27,"column":37},"end":{"row":27,"column":38},"action":"insert","lines":[" "],"id":1376}],[{"start":{"row":27,"column":38},"end":{"row":27,"column":40},"action":"insert","lines":["[]"],"id":1377}],[{"start":{"row":27,"column":40},"end":{"row":27,"column":41},"action":"insert","lines":[","],"id":1378}],[{"start":{"row":26,"column":52},"end":{"row":26,"column":53},"action":"insert","lines":["m"],"id":1379}],[{"start":{"row":26,"column":52},"end":{"row":26,"column":53},"action":"remove","lines":["m"],"id":1380}],[{"start":{"row":26,"column":52},"end":{"row":26,"column":53},"action":"insert","lines":[","],"id":1381}],[{"start":{"row":27,"column":40},"end":{"row":27,"column":41},"action":"remove","lines":[","],"id":1382}],[{"start":{"row":30,"column":24},"end":{"row":30,"column":25},"action":"insert","lines":["t"],"id":1383}],[{"start":{"row":30,"column":25},"end":{"row":30,"column":26},"action":"insert","lines":["a"],"id":1384}],[{"start":{"row":30,"column":25},"end":{"row":30,"column":26},"action":"remove","lines":["a"],"id":1385}],[{"start":{"row":30,"column":24},"end":{"row":30,"column":25},"action":"remove","lines":["t"],"id":1386}],[{"start":{"row":30,"column":24},"end":{"row":30,"column":36},"action":"insert","lines":["returnObj[i]"],"id":1387}],[{"start":{"row":30,"column":36},"end":{"row":30,"column":37},"action":"insert","lines":["."],"id":1388}],[{"start":{"row":30,"column":37},"end":{"row":30,"column":38},"action":"insert","lines":["t"],"id":1389}],[{"start":{"row":30,"column":38},"end":{"row":30,"column":39},"action":"insert","lines":["a"],"id":1390}],[{"start":{"row":30,"column":39},"end":{"row":30,"column":40},"action":"insert","lines":["g"],"id":1391}],[{"start":{"row":30,"column":37},"end":{"row":30,"column":40},"action":"remove","lines":["tag"],"id":1392},{"start":{"row":30,"column":37},"end":{"row":30,"column":45},"action":"insert","lines":["tagNames"]}],[{"start":{"row":30,"column":45},"end":{"row":30,"column":46},"action":"insert","lines":["."],"id":1393}],[{"start":{"row":30,"column":46},"end":{"row":30,"column":47},"action":"insert","lines":["p"],"id":1394}],[{"start":{"row":30,"column":47},"end":{"row":30,"column":48},"action":"insert","lines":["u"],"id":1395}],[{"start":{"row":30,"column":48},"end":{"row":30,"column":49},"action":"insert","lines":["s"],"id":1396}],[{"start":{"row":30,"column":49},"end":{"row":30,"column":50},"action":"insert","lines":["h"],"id":1397}],[{"start":{"row":30,"column":50},"end":{"row":30,"column":52},"action":"insert","lines":["()"],"id":1398}],[{"start":{"row":30,"column":51},"end":{"row":30,"column":53},"action":"insert","lines":["()"],"id":1399}],[{"start":{"row":30,"column":51},"end":{"row":30,"column":53},"action":"remove","lines":["()"],"id":1400}],[{"start":{"row":30,"column":52},"end":{"row":30,"column":53},"action":"insert","lines":[";"],"id":1401}]]},"ace":{"folds":[],"scrolltop":179,"scrollleft":0,"selection":{"start":{"row":30,"column":51},"end":{"row":30,"column":51},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":9,"state":"comment1","mode":"ace/mode/javascript"}},"timestamp":1462339922068}